document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("phone");e&&(e.setAttribute("inputmode","numeric"),e.setAttribute("autocomplete","tel"),e.setAttribute("maxlength","12"),e.addEventListener("input",(()=>{const t=(e=>{const t=String(e||"").replace(/\D/g,"").slice(0,9),n=t.slice(0,2),r=t.slice(2,5),o=t.slice(5,7),i=t.slice(7,9);let l=n;return r&&(l+=" "+r),o&&(l+=" "+o),i&&(l+=" "+i),l})(e.value);e.value!==t&&(e.value=t),(e=>{const t=e.value.length;try{e.setSelectionRange(t,t)}catch(e){}})(e)})),e.addEventListener("keydown",(e=>{["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Home","End"].includes(e.key)||/^\d$/.test(e.key)||e.preventDefault()})));const t=document.getElementById("leadForm");if(!t)return;const n=t.querySelector("#name"),r=t.querySelector("#nameError"),o=t.querySelector("#phoneError"),i=(e,t,n)=>{t&&(t.textContent=n||""),e&&e.classList.add("input-error")},l=(e,t)=>{t&&(t.textContent=""),e&&e.classList.remove("input-error")};n?.addEventListener("input",(()=>l(n,r))),e?.addEventListener("input",(()=>l(e,o))),t.addEventListener("submit",(a=>{a.preventDefault();let c=!0;const s=(n?.value||"").trim();s?l(n,r):(c=!1,i(n,r,"Ismni kiriting"));const u=(e?.value||"").replace(/\D/g,"");if(9!==u.length?(c=!1,i(e,o,"Telefon raqamni toâ€˜liq kiriting")):l(e,o),!c){const e=t.querySelector(".input-error");return void e?.scrollIntoView({behavior:"smooth",block:"center"})}const d={name:s,phone:"+998"+u,createdAt:(new Date).toISOString()};localStorage.setItem("formData",JSON.stringify(d)),window.location.href="thankyou.html"}))}));